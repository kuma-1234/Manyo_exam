<%= form_with(model: task, local: true) do |f| %>

  <% if task.errors.any? %>
    <div class="error_explanation">
      <h2><%= task.errors.count %>件のエラーがあります。</h2>
      <ul>
        <% task.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="input-group">
    <div class="input-group-prepend">
      <span class="input-group-text"><%= f.label :task_title %></span>
      <%= f.text_field :task_title %>
    </div>
  </div>
  <div class="input-group">
    <div class="input-group-prepend">
      <span class="input-group-text"><%= f.label :task_content %></span>
      <%= f.text_area :task_content %>
    </div>
  </div>
  <div class="input-group">
    <div class="input-group-prepend">
      <span class="input-group-text"><%= f.label :deadline %></span>
      <%= f.date_select :deadline,:date_separator => " - " %>
    </div>
  </div>
  <div class="input-group">
    <div class="input-group-prepend">
      <span class="input-group-text"><%= f.label :status %></span>
      <%= f.select :status, Task.statuses.keys.to_a, include_blank:'選択してください'%>
    </div>
  </div>
  <div class="input-group">
    <div class="input-group-prepend">
      <span class="input-group-text"><%= f.label :priority %></span>
      <%= f.select :priority, Task.priorities.keys.to_a, include_blank:'選択してください'%>
    </div>
  </div>
  <div class="input-group">
    <div class="input-group-prepend">
    <span class="input-group-text">タスクラベル</span>
      <% Label.all.each do |label| %>
        <%= form.check_box :label_ids, { multiple: true, checked: @task.labels.find_by(id: label.id).present?, include_hidden: false }, label[:id] %>
        <label class='badge badge-secondary'><%= label.label_name %></label>
      <% end %>
    </div>
  </div>

  <br>
  
  <%= f.submit "作成する" %> 
<% end %>



